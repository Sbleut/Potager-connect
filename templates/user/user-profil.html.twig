{% extends 'layout/layout.html.twig' %}

{% block title %}user
{% endblock %}

{% block body %}
	<h1>user</h1>

	<div class="container">
		<table class="table">
			<thead>
				<th>Id</th>
				<th>Email</th>
				<th>Roles</th>
				<th>Prenom</th>
				<th>Nom</th>

			</thead>
			<tbody>
				<tr>
					<td>{{ user.id }}</td>
					<td>{{ user.email }}</td>
					<td>{{ user.roles ? user.roles|json_encode : '' }}</td>
					<td>{{ user.prenom }}</td>
					<td>{{ user.nom }}</td>
				</tr>
				{#<tr>
																                    <th>IsVerified</th>
																                    <td>{{ user.isVerified ? 'Yes' : 'No' }}</td>
																                </tr>#}
			</tbody>
		</table>
	</div>

	

	<div class="container d-flex flex-wrap">
		{% for produit in user.produits %}
			<div class="card" style="width: 18rem;">
				<img class="card-img-top" src="{{asset('assets/photos/' ~ produit.photo)}}" alt="Card image cap">
				<div class="card-body">
					<h5 class="card-title">{{ produit.nature }}</h5>
					<p class="card-text">{{ produit.producteur.nom }}. Some quick example text to build on the card title and make up the bulk of the card's content.</p>
				</div>
				<ul class="list-group list-group-flush">
					<li class="list-group-item">{{ produit.variete }}</li>
					<li class="list-group-item">{{ produit.categorie }}</li>
					<li class="list-group-item">{{ produit.traitement }}</li>
				</ul>
				<div class="card-body">
					<a href="{{ path('user-retrieve', {'id': produit.producteur.id}) }}" class="card-link">{{ produit.producteur.nom }}</a>
					{% if app.user == produit.producteur %}
						<a class="nav-link" href="{{ path('produit-delete', {'id': produit.id}) }}">supprimer</a>
					{% endif %}
				</div>
			</div>
		{% else %}
			<p>Il n'y a aucun article Ã  afficher.</p>
		{% endfor %}
	</div>

	{% if app.user == user %}
	<div class="container">
		<button>
			<a class="nav-link " href="{{ path('user-delete', {'id': user.id}) }}">Je veux supprimer mon profil</a>
		</button>
	</div>

	
	<div class="container">
		{{ form( form, {'action': path( 'creer-produit' )} ) }}
	</div>
	{% endif %}
	{#<a href="{{ path('user_index') }}">back to list</a>
								
								    <a href="{{ path('user_edit', {'id': user.id}) }}">edit</a>
								
								    {{ include('user/_delete_form.html.twig') }}#}{% endblock %}
